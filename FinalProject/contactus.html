<!DOCTYPE html> 
<html lang="en">
<head>
    <!-- Meta tags for proper encoding and responsiveness -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Link to CSS file-->
    <link rel="stylesheet" href="index.css">
    
    <!--Browser icon-->
    <link rel="icon" href="images/favicon-128x128.png" type="image/png" sizes="128x128" />
    <link rel="icon" href="images/favicon-32x32.png" type="image/png" sizes="32x32" />
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
    <link rel="manifest" href="images/site.webmanifest">
    
    <!-- Google Fonts: Using Material Symbols for icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    
    <!-- Page title -->
    <title>P-VPN Method</title>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>


</head>
<body>
    <div class="container">
        <!-- Nav bar -->
        <nav class="header">
            <div class="app-logo">
              <a href="index.html"><img src="images/NewPVPN.png" alt="App Logo" class="logo-img" /></a>

            </div>
            <!-- Nav links and buttons -->
            <div class="nav-actions">
                <ul class="nav-links">
                    <!-- Links to different pages on the website -->
                    <li class="nav-link"><a href="index.html">Home</a></li>
                    <li class="nav-link"><a href="speedtest.html">Speed Test</a></li>
                    <li class="nav-link"><a href="comparison.html">Comparison</a></li>
                    <li class="nav-link"><a href="aboutus.html">About Us</a></li>
                </ul>
                <!-- contact me button -->
                <div class="nav-buttons">
                    <a href="mailto:x21445372@student.ncirl.ie" class="btn btn-contact-me">Contact Me</a>
                </div>
            </div>
        </nav>

        <main>
            <!-- Form submit so users can contact us-->
            <form action="https://formsubmit.co/pdawg9073@gmail.com" method="POST" class="contact-container">
            <input type="hidden" name="_next" value="http://localhost:8000/contactus.html">
            <!-- Honeypot field to help prevent spam bots from submitting the form -->
            <input type="text" name="_honey" style="display:none">

              <h1>Contact Us</h1>
                
                <!-- Name input fields -->
                <div class="input-name">
                    <input type="text" class="first-name" name="fName" placeholder="First Name">
                    <input type="text" class="last-name" name="lName" placeholder="Last Name">
                </div>
                
                <!-- Email input field -->
                <div class="input-email">
                    <input type="email" class="email" name="email" placeholder="Email">
                </div>
                
                <!-- Subject of the message input field -->
                <div class="input-subject">
                    <input type="text" class="subject" name="subject" placeholder="Subject">
                </div>
                
                <!-- Message input field -->
                <div class="input-message">
                    <textarea class="message" name="message" placeholder="Message"></textarea>
                </div>

                <div class="g-recaptcha" data-sitekey="6LcuiTIrAAAAAGZ6HMv1F41jMMcc_edPtxhbWmDa"></div>

                <!-- Submit button to send the form -->
                <div class="action-btn">
                    <button type="submit" class="btn btn-submit">Submit</button>
                </div>
                
                <div class="or-text">Or contact us on social media</div>
                
                    <!-- My email -->
                    <div class="social">
                        <div class="handle">Email</div>
                        <div class="social-action">
                            <span>X21445372@student.ncirl.ie</span>
                        </div>
                    </div>
            </form>
        </main>
    </div>
    <script>
      // Sanitize function to prevent script injection
      function sanitizeInput(str) {
        const temp = document.createElement("div");
        temp.textContent = str;
        return temp.innerHTML;
      }
    
      // Restore values from localStorage on page load
      window.addEventListener("DOMContentLoaded", () => {
        const fields = ["fName", "lName", "email", "subject", "message"];
        fields.forEach(field => {
          const input = document.querySelector(`[name="${field}"]`);
          const savedValue = localStorage.getItem(`contact-${field}`);
          if (input && savedValue) input.value = savedValue;
        });
      });
    
      // Auto-save values to localStorage on input
      document.querySelector("form").addEventListener("input", (e) => {
        const target = e.target;
        if (target.name) {
          localStorage.setItem(`contact-${target.name}`, target.value);
        }
      });
    
      // Validation, sanitization, and reCAPTCHA on submit
      document.querySelector("form").addEventListener("submit", function (e) {
        const fNameInput = document.querySelector(".first-name");
        const lNameInput = document.querySelector(".last-name");
        const emailInput = document.querySelector(".email");
        const subjectInput = document.querySelector(".subject");
        const messageInput = document.querySelector(".message");
    
        const fName = sanitizeInput(fNameInput.value.trim());
        const lName = sanitizeInput(lNameInput.value.trim());
        const email = sanitizeInput(emailInput.value.trim());
        const subject = sanitizeInput(subjectInput.value.trim());
        const message = sanitizeInput(messageInput.value.trim());
    
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const recaptchaResponse = grecaptcha.getResponse(); // reCAPTCHA check
    
        if (!fName || !lName || !email || !subject || !message) {
          alert("Please fill in all fields.");
          e.preventDefault();
          return;
        }
    
        if (!emailPattern.test(email)) {
          alert("Please enter a valid email address.");
          e.preventDefault();
          return;
        }
    //If user tries to submit without completing reCAPTCHA
        if (!recaptchaResponse) {
          alert("Please complete the reCAPTCHA.");
          e.preventDefault();
          return;
        }
    
        // Replace values with sanitized ones before submission
        fNameInput.value = fName;
        lNameInput.value = lName;
        emailInput.value = email;
        subjectInput.value = subject;
        messageInput.value = message;
    
        // Clear saved data from localStorage on successful submission
        ["fName", "lName", "email", "subject", "message"].forEach(field => {
          localStorage.removeItem(`contact-${field}`);
        });
      });
    </script>    
    
</body>
</html>

<!-- Style Section -->
<style>
:root {
    --color-background: #141414;
    --color-text-white: #FFFFFF;
    --color-placeholder: #C4C4C4;
    --color-light-black: #29384D;
    --color-background-input-field: #242424;
    --color-border-1: #383838;
    --color-actions: #38E078;
    --color-border: #E5E8EB;
}

body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    box-sizing: border-box;
    background-color: var(--color-background);
    color: var(--color-text-white);
}

.logo-img {
    height: 100px; 
    width: auto;
    object-fit: contain;
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 40px;
    height: 80px; 
    box-shadow: 0 0 0.8px 0 var(--color-border);
}

.nav-actions {
    display: flex;
    align-items: center;
    gap: 64px;
}

.nav-links {
    display: flex;
    gap: 24px;
    padding: 0;
    list-style: none;
}

.nav-link a {
    text-decoration: none;
    color: var(--color-text-white);
}

.nav-link a:hover {
    color: var(--color-actions);
}

.nav-buttons {
    display: flex;
    gap: 8px;
}

.btn-contact-me {
    background-color: var(--color-actions);
    color: var(--color-text-white);
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 40px;
    padding: 10px 16px;
    border-radius: 12px;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.btn-contact-me:hover {
    background-color: #2ec96b; 
    
}

.btn {
    height: 40px;
    border: none;
    padding: 10px 16px;
    border-radius: 12px;
    letter-spacing: 0.5px;
    cursor: pointer;
}

.btn-sign-in {
    background-color: var(--color-actions);
}

.btn-sign-up {
    background-color: var(--color-light-black);
    color: var(--color-text-white);
}

.contact-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 24px;
    margin-top: 36px;
}

input, textarea {
    border-radius: 12px;
    border: 1px solid var(--color-border-1);
    outline: none;
    width: 456px;
    padding: 0 8px 0 16px;
    background-color: var(--color-background-input-field);
    color: var(--color-text-white);
}

input {
    height: 56px;
}

textarea {
    height: 120px;
    padding: 8px 16px;
    resize: vertical;
}

.input-name {
    display: flex;
    gap: 24px;
}

.input-name input {
    width: 204px;
}

.btn-submit {
    background-color: var(--color-actions);
    width: 480px;
}

.social-contact {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.social {
    width: 432px;
    height: 64px;
    border: 1px solid var(--color-border-1);
    border-radius: 12px;
    padding: 0 24px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.social-action {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--color-actions);
    cursor: pointer;
}

::placeholder, .handle, .or-text {
    color: var(--color-placeholder);
}

/* Responsive design for mobile */
@media (max-width: 600px) {
    .input-name {
        flex-direction: column;
        gap: 12px;
    }
    input, textarea, .btn-submit {
        width: 100%;
    }
    .social, .social-contact {
        width: 100%;
    }
}
</style>
